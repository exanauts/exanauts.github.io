<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developer reference · ProxAL.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ProxAL.jl</span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../man/formulation.html">Formulation</a></li><li><a class="tocitem" href="../man/algorithm.html">Algorithm</a></li><li><a class="tocitem" href="../man/usage.html">Usage</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="modelparams.html">Model parameters</a></li><li><a class="tocitem" href="algparams.html">Algorithm parameters</a></li><li><a class="tocitem" href="algorithm.html">Main functions</a></li><li class="is-active"><a class="tocitem" href="developer.html">Developer reference</a><ul class="internal"><li><a class="tocitem" href="#NLP-Blocks"><span>NLP Blocks</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href="developer.html">Developer reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="developer.html">Developer reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/exanauts/ProxAL.jl/blob/master/docs/src/lib/developer.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Developer-reference"><a class="docs-heading-anchor" href="#Developer-reference">Developer reference</a><a id="Developer-reference-1"></a><a class="docs-heading-anchor-permalink" href="#Developer-reference" title="Permalink"></a></h1><h2 id="NLP-Blocks"><a class="docs-heading-anchor" href="#NLP-Blocks">NLP Blocks</a><a id="NLP-Blocks-1"></a><a class="docs-heading-anchor-permalink" href="#NLP-Blocks" title="Permalink"></a></h2><p>The <a href="../man/formulation.html#Formulation">Formulation</a> is decomposed into smaller nonlinear programming (NLP) blocks. Blocks are coupled together using a <code>OPFBlocks</code> structure.</p><article class="docstring"><header><a class="docstring-binding" id="ProxAL.OPFBlocks" href="#ProxAL.OPFBlocks"><code>ProxAL.OPFBlocks</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">OPFBlocks(
    opfdata::OPFData,
    rawdata::RawData;
    modelinfo::ModelParams = ModelParams(),
    backend=JuMPBlockModel,
    algparams::AlgParams = AlgParams()
)</code></pre><p>Create a structure <code>OPFBlocks</code> to decompose the original OPF problem specified in <code>opfdata</code> timestep by timestep, by dualizing the ramping constraint. One block corresponds to one optimization subproblem (and hence, to a particular timestep), and the attribute <code>blkCount</code> enumerates the total number of subproblems. The subproblems are specified using <code>AbstractBlockModel</code> objects, allowing to define them either with JuMP (if <code>backend=JuMPBlockModel</code> is chosen) or with ExaPF (<code>backend=ExaBlockModel</code>).</p><p><strong>Decomposition by contingencies</strong></p><p>By default, OPFBlocks decomposes the problem only timestep by timestep (single-period multiple-contingency scheme), leading to a total of <code>T</code> subproblems. However, if the option <code>algparams.decompCtgs</code> is set to <code>true</code>, the original problem is also decomposed contingency by contingency (single-period single-contingency scheme). In this case the total number of subproblems is <code>T * K</code> (with <code>K</code> the total number of contingencies).</p><p><strong>Deporting the resolution on the GPU</strong></p><p>When the backend is set to <code>ExaBlockModel</code> (and a CUDA GPU is available), the user could chose to deport the resolution of each subproblem directly on the GPU simply by setting <code>algparams.device=CUDADevice</code>. However, note that we could not instantiate more subproblems on the GPU than the number of GPU available.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blocks.jl#L25-L64">source</a></section></article><p>Internally, each block is represented as follows.</p><article class="docstring"><header><a class="docstring-binding" id="ProxAL.AbstractBlockModel" href="#ProxAL.AbstractBlockModel"><code>ProxAL.AbstractBlockModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">AbstractBlockModel</code></pre><p>Abstract supertype for the definition of block subproblems.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blockmodel.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProxAL.JuMPBlockModel" href="#ProxAL.JuMPBlockModel"><code>ProxAL.JuMPBlockModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">JuMPBlockModel(
    blk::Int,
    opfdata::OPFData, raw_data::RawData,
    modelinfo::ModelParams, t::Int, k::Int, T::Int,
)</code></pre><p>Use the modeler JuMP to define the optimal power flow inside the block model. This function is called inside the constructor of the structure <code>OPFBlocks</code>, used for decomposition purpose.</p><p><strong>Arguments</strong></p><ul><li><code>blk::Int</code>: ID of the block represented by this model</li><li><code>opfdata::OPFData</code>: data used to build the optimal power flow problem.</li><li><code>raw_data::RawData</code>: same data, in raw format</li><li><code>modelinfo::ModelParams</code>: parameters related to specification of the optimization model</li><li><code>t::Int</code>: current time-step. Value should be between <code>1</code> and <code>T</code>.</li><li><code>k::Int</code>: current contingency</li><li><code>T::Int</code>: final horizon</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blockmodel.jl#L118-L140">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProxAL.ExaBlockModel" href="#ProxAL.ExaBlockModel"><code>ProxAL.ExaBlockModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ExaBlockModel(
    blk::Int,
    opfdata::OPFData, raw_data::RawData,
    modelinfo::ModelParams, t::Int, k::Int, T::Int;
    device::TargetDevice=CPU,
    nr_tol::Float64=1e-10,
)</code></pre><p>Use the package ExaPF to define the optimal power flow inside the block model. This function is called inside the constructor of the structure <code>OPFBlocks</code>, used for decomposition purpose.</p><p><strong>Arguments</strong></p><ul><li><code>blk::Int</code>: ID of the block represented by this model</li><li><code>opfdata::OPFData</code>: data used to build the optimal power flow problem.</li><li><code>raw_data::RawData</code>: same data, in raw format</li><li><code>modelinfo::ModelParams</code>: parameters related to specification of the optimization model</li><li><code>t::Int</code>: current time-step. Value should be between <code>1</code> and <code>T</code>.</li><li><code>k::Int</code>: current contingency</li><li><code>T::Int</code>: final horizon</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blockmodel.jl#L278-L302">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProxAL.init!" href="#ProxAL.init!"><code>ProxAL.init!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">init!(block::AbstractBlockModel, algparams::AlgParams)</code></pre><p>Init the optimization model by populating the model with variables and constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blockmodel.jl#L32-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProxAL.optimize!" href="#ProxAL.optimize!"><code>ProxAL.optimize!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">optimize!(block::AbstractBlockModel, x0::AbstractArray, algparams::AlgParams)</code></pre><p>Solve the optimization problem, starting from an initial variable <code>x0</code>. The optimization solver is specified in field <code>algparams.optimizer</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blockmodel.jl#L41-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProxAL.set_objective!" href="#ProxAL.set_objective!"><code>ProxAL.set_objective!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_objective!(
    block::AbstractBlockModel,
    algparams::AlgParams,
    primal::PrimalSolution,
    dual::DualSolution
)</code></pre><p>Update the objective inside <code>block</code>&#39;s optimization subproblem. The new objective updates the coefficients of the penalty terms, to reflect the new <code>primal</code> and <code>dual</code> solutions passed in the arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blockmodel.jl#L69-L82">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProxAL.get_solution" href="#ProxAL.get_solution"><code>ProxAL.get_solution</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_solution(block::AbstractBlockModel, output)</code></pre><p>Return the solution of the optimization as a named tuple <code>solution</code>, with fields</p><ul><li><code>status::MOI.TerminationStatus</code>: final status returned by the solver</li><li><code>minimum::Float64</code>: optimal objective found</li><li><code>vm::AbstractArray</code>: optimal values of voltage magnitudes</li><li><code>va::AbstractArray</code>: optimal values of voltage angles</li><li><code>pg::AbstractArray</code>: optimal values of active power generations</li><li><code>qg::AbstractArray</code>: optimal values of reactive power generations</li><li><code>ωt::AbstractArray</code>: optimal values of frequency</li><li><code>st::AbstractArray</code>: optimal values of slack variables</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blockmodel.jl#L51-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ProxAL.add_variables!" href="#ProxAL.add_variables!"><code>ProxAL.add_variables!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">add_variables!(block::AbstractBlockModel, algparams::AlgParams)</code></pre><p>Add all optimization variables into the decomposed optimization model <code>block</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/exanauts/ProxAL.jl/blob/f8646cd274a33e3a1ed8791adcfd0be16e60abf3/src/blockmodel.jl#L86-L92">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="algorithm.html">« Main functions</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 21 July 2021 15:23">Wednesday 21 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
